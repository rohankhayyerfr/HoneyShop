{% extends 'base.html' %}
{% load static %}
{% load i18n %}

{% block content %}
<div class="bg-stone-50 min-h-screen py-10 font-fa text-stone-800">
    <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 animate-fade-in-up">
        
        <div class="text-center mb-12">
            <h1 class="text-3xl font-extrabold text-stone-900 mb-4">{% trans "چطور می‌توانیم کمکتان کنیم؟" %}</h1>
            <p class="text-stone-500 mb-8">{% trans "پاسخ پرتکرارترین سوالات شما اینجاست" %}</p>
            
            <div class="relative max-w-lg mx-auto">
                <input type="text" id="faq-search" placeholder="{% trans 'جستجو در سوالات (مثلاً: نحوه ارسال)' %}" 
                       class="w-full bg-white border border-stone-200 rounded-2xl py-4 pr-12 pl-4 shadow-sm focus:ring-2 focus:ring-brand-500 focus:border-transparent outline-none transition-all">
                <svg class="w-6 h-6 text-stone-400 absolute right-4 top-1/2 -translate-y-1/2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" /></svg>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 items-start">
            
            <div class="hidden lg:block lg:col-span-4 lg:sticky lg:top-8">
                <div class="bg-white rounded-2xl shadow-sm border border-stone-100 overflow-hidden">
                    <nav class="flex flex-col">
                        <a href="#shipping" class="px-6 py-4 font-bold text-stone-800 bg-brand-50 border-r-4 border-brand-600 hover:bg-stone-50 transition-colors flex items-center justify-between">
                            {% trans "ارسال و تحویل" %}
                            <svg class="w-4 h-4 text-brand-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg>
                        </a>
                        <a href="#products" class="px-6 py-4 font-bold text-stone-500 hover:text-stone-800 hover:bg-stone-50 transition-colors border-r-4 border-transparent">{% trans "کیفیت محصولات" %}</a>
                        <a href="#returns" class="px-6 py-4 font-bold text-stone-500 hover:text-stone-800 hover:bg-stone-50 transition-colors border-r-4 border-transparent">{% trans "عودت و مرجوعی" %}</a>
                        <a href="#account" class="px-6 py-4 font-bold text-stone-500 hover:text-stone-800 hover:bg-stone-50 transition-colors border-r-4 border-transparent">{% trans "حساب کاربری" %}</a>
                    </nav>
                </div>

                <div class="bg-brand-900 text-white rounded-2xl p-6 mt-6 text-center">
                    <h3 class="font-bold mb-2">{% trans "پاسخ خود را نیافتید؟" %}</h3>
                    <p class="text-xs text-brand-200 mb-4 leading-5">{% trans 'کارشناسان ما همه روزه از ساعت ۹ تا ۱۷ آماده پاسخگویی هستند.' %}</p>
                    <a href="tel:09102206828" class="inline-flex items-center gap-2 bg-white text-brand-900 px-6 py-2 rounded-xl font-bold text-sm hover:bg-brand-50 transition-colors">
                        <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" /></svg>
                        +98 910 220 6828
                    </a>
                </div>
            </div>

            <div class="lg:col-span-8 space-y-6">
                
                <div id="shipping">
                    <h2 class="text-xl font-bold mb-4 flex items-center gap-2 text-stone-900">
                        <span class="w-2 h-8 bg-brand-500 rounded-full"></span>
                        {% trans "ارسال و تحویل سفارش" %}
                    </h2>
                    
                    <div class="space-y-3">
                        <div class="bg-white rounded-2xl border border-stone-200 overflow-hidden">
                            <button class="faq-btn w-full px-6 py-4 text-right flex justify-between items-center font-bold text-stone-800 hover:bg-stone-50 transition-colors focus:outline-none">
                                <span>{% trans 'سفارش‌ها چند روزه به دستم می‌رسند؟' %}</span>
                                <svg class="w-5 h-5 text-stone-400 transform transition-transform duration-300" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg>
                            </button>
                            <div class="faq-content max-h-0 overflow-hidden transition-all duration-300 ease-in-out">
                                <div class="px-6 pb-6 text-sm text-stone-500 leading-7 border-t border-stone-100 pt-4">
                                    {% blocktrans %}                                    سفارش‌های تهران در صورت ثبت قبل از ساعت ۱۲، همان روز و نهایتاً تا ۲۴ ساعت کاری تحویل داده می‌شوند. سفارش‌های شهرستان از طریق پست پیشتاز یا تیپاکس ارسال شده و معمولاً بین ۲ تا ۴ روز کاری زمان می‌برد.
{% endblocktrans %}
                                </div>
                            </div>
                        </div>

                        <div class="bg-white rounded-2xl border border-stone-200 overflow-hidden">
                            <button class="faq-btn w-full px-6 py-4 text-right flex justify-between items-center font-bold text-stone-800 hover:bg-stone-50 transition-colors focus:outline-none">
                                <span>{% trans 'هزینه ارسال چقدر است؟' %}</span>
                                <svg class="w-5 h-5 text-stone-400 transform transition-transform duration-300" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg>
                            </button>
                            <div class="faq-content max-h-0 overflow-hidden transition-all duration-300 ease-in-out">
                                <div class="px-6 pb-6 text-sm text-stone-500 leading-7 border-t border-stone-100 pt-4">
                                    ....
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="products" class="pt-6">
                    <h2 class="text-xl font-bold mb-4 flex items-center gap-2 text-stone-900">
                        <span class="w-2 h-8 bg-brand-500 rounded-full"></span>
                        {% trans "کیفیت و اصالت محصولات" %}
                    </h2>
                    
                    <div class="space-y-3">
                        <div class="bg-white rounded-2xl border border-stone-200 overflow-hidden">
                            <button class="faq-btn w-full px-6 py-4 text-right flex justify-between items-center font-bold text-stone-800 hover:bg-stone-50 transition-colors focus:outline-none">
                                <span>{% trans 'هزینه ارسال چقدر است؟' %}</span>
                                <svg class="w-5 h-5 text-stone-400 transform transition-transform duration-300" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg>
                            </button>
                            <div class="faq-content max-h-0 overflow-hidden transition-all duration-300 ease-in-out">
                                <div class="px-6 pb-6 text-sm text-stone-500 leading-7 border-t border-stone-100 pt-4">
                                    بله، تمامی عسل‌های "نکتار" دارای برگه آنالیز آزمایشگاهی هستند که میزان ساکارز و خلوص محصول را تایید می‌کند. شما می‌توانید در صفحه هر محصول تصویر برگه آزمایش را مشاهده کنید. در صورت اثبات خلاف آن، <span class="font-bold text-stone-800">۲ برابر وجه</span> به شما عودت داده می‌شود.
                                </div>
                            </div>
                        </div>
                        
                         <div class="bg-white rounded-2xl border border-stone-200 overflow-hidden">
                            <button class="faq-btn w-full px-6 py-4 text-right flex justify-between items-center font-bold text-stone-800 hover:bg-stone-50 transition-colors focus:outline-none">
                                <span>عسل شکرک زده (رس بسته) خراب است؟</span>
                                <svg class="w-5 h-5 text-stone-400 transform transition-transform duration-300" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg>
                            </button>
                            <div class="faq-content max-h-0 overflow-hidden transition-all duration-300 ease-in-out">
                                <div class="px-6 pb-6 text-sm text-stone-500 leading-7 border-t border-stone-100 pt-4">
                                    خیر، اتفاقاً شکرک زدن (که به آن رس بستن می‌گویند) یکی از نشانه‌های قطعی طبیعی بودن و حرارت ندیدن عسل است. عسل‌های صنعتی که پاستوریزه می‌شوند شکرک نمی‌زنند اما خواص خود را از دست می‌دهند. عسل طبیعی در هوای سرد به مرور کریستالی می‌شود که با قرار دادن ظرف در آب گرم (بن‌ماری) به حالت اول برمی‌گردد.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>

<script>
    document.querySelectorAll('.faq-btn').forEach(button => {
        button.addEventListener('click', () => {
            const content = button.nextElementSibling;
            const icon = button.querySelector('svg');
            
            // بستن بقیه آیتم‌ها (اگر می‌خواهید فقط یکی باز بماند)
            document.querySelectorAll('.faq-content').forEach(c => {
                if (c !== content) {
                    c.style.maxHeight = null;
                    c.previousElementSibling.querySelector('svg').classList.remove('rotate-180');
                    c.previousElementSibling.classList.remove('text-brand-600');
                }
            });

            // باز/بسته کردن آیتم فعلی
            if (content.style.maxHeight) {
                content.style.maxHeight = null;
                icon.classList.remove('rotate-180');
                button.classList.remove('text-brand-600');
            } else {
                content.style.maxHeight = content.scrollHeight + "px";
                icon.classList.add('rotate-180');
                button.classList.add('text-brand-600');
            }
        });
    });

    // اسکریپت ساده برای سرچ (فیلتر کردن)
    document.getElementById('faq-search').addEventListener('keyup', function() {
        let filter = this.value.toUpperCase();
        let items = document.querySelectorAll('.faq-btn');
        
        items.forEach(item => {
            let text = item.textContent || item.innerText;
            // پیدا کردن والد اصلی آیتم
            let parent = item.parentElement; 
            
            if (text.toUpperCase().indexOf(filter) > -1) {
                parent.style.display = "";
            } else {
                parent.style.display = "none";
            }
        });
    });
</script>
{% endblock %}